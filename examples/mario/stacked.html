<!DOCTYPE html>
<meta charset="utf-8">
<link href="../../d3plus.css" rel="stylesheet" type="text/css">
<style>

body {
  margin: 0px; padding:0;
}

/*div#viz {
  margin: 0px 50px;
}
*/

</style>
<body>

<div id="viz"></div>

<script src="../../lib/d3.js"></script>
<script src="../../lib/modernizr.custom.js"></script>
<script src="../../src/general.js"></script>
<script src="../../src/utils/utils.js"></script>
<script src="../../src/utils/tooltip.js"></script>
<script src="../../src/utils/error.js"></script>
<script src="../../src/viz.js"></script>
<script src="../../src/apps/stacked.js"></script>
<script src="/examples/mario/util.js"></script>
<script>


	politicoid='257'
  var viz = d3plus.viz()
  d3.json("/examples/mario/data/rodada.json", function(rodada){
d3.json("/examples/mario/data/despesatipo.json", function(despesatipo){
	d3.json("/examples/mario/data/partido.json", function(partido){
	d3.json("/examples/mario/data/candidatura257.json", function(attr){
	  d3.json("/examples/mario/data/despesa257.json", function(data){
	 
		   inner_html = function(obj) {
         
          
          var htmlnovo= "<iframe id='iframe3' src='/despesa/boxdespesa/";
        	  htmlnovo+=obj+ "' style='width: 300px; height: 360px'></iframe>"
          return htmlnovo
        }
		   	
		  	clicker = function(obj) {
		        parent.window.location="/politica/politico/"+obj
		      }
		  	attrs=createCandidaturas(attr.candidaturas,partido.partidos)	;
		  	attrsRodada=createRodadas(rodada.rodadas);
		  	attrsDespesa=createDespesas(despesatipo.despesatipo);
		  	
	   		var attrsNovo = {"rodada": attrsRodada, "candidatura": attrs,"categoria":attrsDespesa}
		   	 
        viz = d3plus.viz()
          .type("stacked")
          .id("categoria")
          .attrs(attrsNovo) 
          .text("categoria") //nome_despesatipo
          .value("valor")
          //.tooltip_info([ "nome_despesatipo", "valor", "rodada"])
          .xaxis("rodada")//nome_rodada
          //.year_var("rodada")
         //.color_var("cor_despesatipo")
          //.stack_type("monotone")
          // .click_function(inner_html)
          //.layout("share")
        
        d3.select("#viz")
          .datum(data.despesas)
          .call(viz)
          
          
        
	  })
    })
  })
})
})

</script>